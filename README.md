# AutoFishR 自动钓鱼重制版

- 作者: ksqeib 羽学 少司命
- 出处: 无
- 这是一个Tshock服务器插件，主要用于：
- 自动钓鱼，当插件开启时受渔力与鱼饵力影响，
- 当没钓到鱼时，会得到【额外渔获】里的物品
- 可通过配置文件调整鱼钩数量，
- 消耗指定物品来换取插件使用时长，
- 还可以自定义配置钓鱼的额外物品。
- 配备完整的指令系统:管理与玩家可见的菜单指令是不一样的
- 甚至有些功能没开启是不会显示相关指令的
- 先前的仓库 https://github.com/ksqeib/AutoFish-old
## 指令

玩家指令（命令 `/af` 及别名 `/autofish`）：

| 命令 | 权限 | 说明 |
| --- | --- | --- |
| /af | autofish | 查看菜单/帮助。 |
| /af status | autofish | 查看个人状态。 |
| /af fish | autofish.fish | 开关个人自动钓鱼。 |
| /af buff | autofish.buff | 开关个人钓鱼BUFF（需全局BUFF开启）。 |
| /af multi | autofish.multihook | 开关个人多钩（需全局多钩开启）。 |
| /af hook 数字 | autofish.multihook | 设置个人钩子上限（不超过全局多钩上限，需全局多钩开启）。 |
| /af stack | autofish.filter.unstackable | 开关过滤不可堆叠渔获（需全局过滤开启）。 |
| /af monster | autofish.filter.monster | 开关不钓怪物（需全局不钓怪开启）。 |
| /af anim | autofish.skipanimation | 开关跳过上鱼动画（需全局动画跳过开启）。 |
| /af list | autofish | 列出消耗模式指定物品表（需全局消耗模式开启）。 |
| /af loot | autofish | 查看额外渔获表（需配置存在额外渔获）。 |

管理员指令（需权限 `autofish.admin`）：

| 命令 | 说明 |
| --- | --- |
| /af gbuff | 开关全局钓鱼BUFF。 |
| /af gmore | 开关全局多线模式。 |
| /af gduo 数字 | 设置全局多线钩子上限（需全局多钩开启）。 |
| /af gmod | 开关全局消耗模式。 |
| /af gset 数量 | 设置消耗物品数量要求（需全局消耗模式开启）。 |
| /af gtime 数字 | 设置自动时长（分钟，需全局消耗模式开启）。 |
| /af gadd 物品名 | 添加指定鱼饵（需全局消耗模式开启）。 |
| /af gdel 物品名 | 移除指定鱼饵（需全局消耗模式开启）。 |
| /af gaddloot 物品名 | 添加额外渔获。 |
| /af gdelloot 物品名 | 移除额外渔获。 |
| /af gstack | 开关全局过滤不可堆叠渔获。 |
| /af gmonster | 开关全局不钓怪物。 |
| /af gani | 开关全局跳过上鱼动画。 |

其他：`/reload`（tshock.cfg.reload）重载配置。

---
配置注意事项
---
1.本插件的权限名为`autofish` 你可以输入 `/group addperm default autofish`给玩家添加权限

2.`消耗模式`消耗物品来换取自动钓鱼使用时长。

3.`多钩钓鱼`为自动钓鱼开启连发模式，让钓鱼效率更高，`多钩上限`定义最多可以多少鱼钩同时自动钓

4.`消耗数量`为消耗多少个物品数量来换取玩家自动钓鱼使用`自动时长`，时长单位为`分钟`，可通过/af菜单指令查看

5.`消耗物品`为指定消耗的物品ID，用于开启自动钓鱼功能用。

6.`额外渔获`当其开启时，会无视环境要求和鱼获检查，钓上这个数组里的随机物品

7.`随机物品`开启时会随机钓出任意物品

8.`禁止衍生弹幕`用来禁止在多线钓鱼模式时，单体召唤物会衍生出更多数量。

## 配置

> 配置文件位置：tshock/AutoFish.json

重要开关（全局 + 默认）：

- 插件开关：`插件开关`
- 插件开关：`插件总开关`
- 全局自动钓鱼：`全局自动钓鱼开关`；玩家默认状态：`默认自动钓鱼开关`
- 全局多钩：`全局多钩钓鱼开关`；玩家默认状态：`默认多钩开关`；全局上限：`多钩上限`
- 全局 Buff：`全局Buff开关`；玩家默认状态：`默认Buff开关`
- 全局消耗模式：`全局消耗模式开关`；玩家默认状态：`默认消耗模式`
- 过滤不可堆叠：`全局过滤不可堆叠物品`；玩家默认状态：`默认过滤不可堆叠物品`
- 不钓怪物：`全局不钓怪物`；玩家默认状态：`默认不钓怪物`
- 跳过上鱼动画：`全局跳过上鱼动画`；玩家默认状态：`默认跳过上鱼动画`

```json
{
  "插件总开关": true,
  "全局自动钓鱼开关": true,
  "全局Buff开关": true,
  "全局多钩钓鱼开关": true,
  "全局消耗模式开关": false,
  "全局过滤不可堆叠物品": true,
  "默认过滤不可堆叠物品": true,
  "全局不钓怪物": true,
  "默认不钓怪物": true,
  "全局跳过上鱼动画": true,
  "默认跳过上鱼动画": true,
  "随机物品": false,
  "多钩上限": 5,
  "默认自动钓鱼开关": false,
  "默认Buff开关": false,
  "默认多钩开关": false,
  "默认消耗模式": false,
  "Buff表": {},
  "消耗数量": 10,
  "奖励时长": 12,
  "额外渔获": [],
  "消耗物品": [
    2002,
    2675,
    2676,
    3191,
    3194
  ],
  "禁止衍生弹幕": [
    623,
    625,
    626,
    627,
    628,
    831,
    832,
    833,
    834,
    835,
    963,
    970
  ]
}
```

## 更新日志

- 请移步CHANGELOG.md

## 反馈

- 优先发issued -> 共同维护的插件库：https://github.com/UnrealMultiple/TShockPlugin
- 次优先：TShock官方群：816771079
- 大概率看不到但是也可以：国内社区trhub.cn ，bbstr.net , tr.monika.love

## 已知问题
- 非SSC服务器不扣鱼饵

## TODO
- 渔获概率可配置，不均等概率
- 添加额外的可钓上来的敌怪